{"version":3,"sources":["components/AlertDismissable.js","pages/About.js","components/LoadButton.js","model/classes.js","config.js","pages/Classify.js","pages/NotFound.js","Routes.js","App.js","serviceWorker.js","index.js"],"names":["AlertDismissable","Component","render","this","props","show","React","createElement","Alert","variant","onClose","dismissible","title","dangerouslySetInnerHTML","__html","message","Home","className","_ref","isLoading","text","loadingText","disabled","Button","Object","assign","concat","Spinner","as","animation","size","role","aria-hidden","MODEL_CLASSES","0","1","2","3","4","5","src_config","API_ENDPOINT","MODEL_PATH","IMAGE_SIZE","CANVAS_SIZE","TOPK_PREDICTIONS","INDEXEDDB_DB","INDEXEDDB_STORE","INDEXEDDB_KEY","Classify","constructor","super","initWebcam","async","webcam","tf","refs","resizeWidth","resizeHeight","facingMode","e","noWebcam","style","display","startWebcam","start","stopWebcam","stop","getModelInfo","fetch","config","method","then","response","json","data","modelLastUpdated","last_updated","console","log","catch","err","updateModel","setState","isDownloadingModel","model","save","modelUpdateAvailable","showModelUpdateAlert","showModelUpdateSuccess","classifyLocalImage","isClassifying","croppedCanvas","cropper","getCroppedCanvas","image","fromPixels","toFloat","imageData","processImage","resizedImage","resizeBilinear","logits","predict","probabilities","preds","getTopKClasses","predictions","photoSettingsOpen","state","context","canvas","getContext","ratioX","width","ratioY","height","ratio","Math","min","clearRect","drawImage","dispose","classifyWebcamImage","imageCapture","capture","resized","tensorData","div","toPixels","expandDims","sub","values","topK","valuesAndIndices","i","length","push","value","index","sort","a","b","topkValues","Float32Array","topkIndices","Int32Array","topClassesAndProbs","probability","toFixed","handlePanelClick","event","handleFileChange","target","files","file","URL","createObjectURL","filename","name","handleTabSelect","activeKey","modelLoaded","isModelLoading","[object Object]","window","db","openDB","item","transaction","objectStore","get","dateSaved","Date","modelArtifactsInfo","getTime","error","warn","Fragment","onClick","aria-controls","aria-expanded","FaChevronDown","FaChevronRight","Collapse","in","id","Container","modelType","Tabs","defaultActiveKey","onSelect","Tab","eventKey","ref","FaCamera","autoPlay","playsInline","muted","LoadButton","Form","Group","controlId","Label","Control","onChange","type","accept","Cropper","src","guides","aspectRatio","viewMode","ListGroup","map","category","pages_NotFound","href","Routes","childProps","HashRouter","Switch","Route","path","exact","component","About","NotFound","withRouter","dismissUpdateAlert","showUpdateAlert","reloadMsg","Navbar","collapseOnSelect","expand","Brand","Toggle","Nav","Link","to","updateAvailable","paddingTop","isLocalhost","Boolean","location","hostname","match","register","navigator","process","origin","addEventListener","swUrl","contentType","headers","status","indexOf","serviceWorker","ready","registration","unregister","reload","registerValidSW","checkValidServiceWorker","newerSwAvailable","sw","onUpdate","waiting","active","onupdatefound","installingWorker","installing","onstatechange","controller","onSuccess","Index","arguments","contentCached","handleUpdate","waitingServiceWorker","postMessage","componentDidMount","Router","App","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.14d917a7.chunk.js","sourcesContent":["\nimport React, { Component } from 'react';\nimport { Alert } from 'react-bootstrap';\n\n/**\n * Class to handle the rendering of a dismissiable alert to use for things like errors.\n * @extends React.Component\n */\nclass AlertDismissable extends Component {\n\n  render() {\n    if (this.props.show) {\n      return (\n        <Alert variant={this.props.variant || 'danger'} onClose={this.props.onClose} dismissible>\n          { this.props.title && <h5><strong>{this.props.title}</strong></h5> }\n          <div dangerouslySetInnerHTML={{ __html: this.props.message }} />\n        </Alert>\n      );\n    }\n    return null;\n  }\n}\n\nexport default AlertDismissable;\n","import React, { Component } from 'react';\nimport './About.css';\n\n/**\n * Class to handle the rendering of the Home page.\n * @extends React.Component\n */\nexport default class Home extends Component {\n  render() {\n    return (\n      <div className=\"About container\">\n        <h1>About</h1>\n        <br></br>\n        <p>\n          Amazing web application that use magic algorithm that classify fresh and rotten fruits (sadly, it can only classify Apple, Banana, and Orange).\n          Turns out it using Image Classification with TensorFlow.js!\n          This app use our converted TensorFlow.js format CNN model to provide better experience when using this app as PWA and provide offline capabilities.\n          You can use this app to decide which fruits is fresh or rotten and decide which fruit is apple, banana, or orange\n          (in case you hit your head or something, LOL)\n          <br></br>\n          <br></br>\n          </p>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport { Button, Spinner } from 'react-bootstrap';\n\n/**\n * This produces a button that will have a loading animation while the isLoading property is true.\n */\nexport default ({\n  isLoading,\n  text,\n  loadingText,\n  className = '',\n  disabled = false,\n  ...props\n}) =>\n  <Button\n    className={`LoadButton ${className}`}\n    disabled={disabled || isLoading}\n    {...props}\n  >\n    {isLoading && <Spinner\n      as=\"span\"\n      animation=\"border\"\n      size=\"sm\"\n      role=\"status\"\n      aria-hidden=\"true\"\n    />}{' '}\n    {isLoading ? loadingText : text}\n  </Button>;\n","/* eslint-disable */\n// Theses classes should correspond to the softmax output of your model.\n\nexport const MODEL_CLASSES = {\n  0: 'Fresh Apple',\n  1: 'Fresh Banana',\n  2: 'Fresh Orange',\n  3: 'Rotten Apple',\n  4: 'Rotten Banana',\n  5: 'Rotten Orange'\n};\n","export default {\n  API_ENDPOINT: 'http://localhost:5000/api',\n  // API_ENDPOINT: 'https://[YOUR-ROUTE].mybluemix.net/api'\n};\n","import React, { Component, Fragment } from 'react';\nimport {\n  Alert, Button, Collapse, Container, Form, Spinner, ListGroup, Tabs, Tab\n} from 'react-bootstrap';\nimport { FaCamera, FaChevronDown, FaChevronRight } from 'react-icons/fa';\nimport { openDB } from 'idb';\nimport Cropper  from 'react-cropper';\nimport * as tf from '@tensorflow/tfjs';\nimport LoadButton from '../components/LoadButton';\nimport { MODEL_CLASSES } from '../model/classes';\nimport config from '../config';\nimport './Classify.css';\nimport 'cropperjs/dist/cropper.css';\n\n\nconst MODEL_PATH = '/model/model3/transfer_learning/model.json';\nconst IMAGE_SIZE = 150;\nconst CANVAS_SIZE = 224;\nconst TOPK_PREDICTIONS = 3;\n\nconst INDEXEDDB_DB = 'tensorflowjs';\nconst INDEXEDDB_STORE = 'model_info_store';\nconst INDEXEDDB_KEY = 'web-model';\n\n/**\n * Class to handle the rendering of the Classify page.\n * @extends React.Component\n */\nexport default class Classify extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.webcam = null;\n    this.model = null;\n    this.modelLastUpdated = null;\n\n    this.state = {\n      modelLoaded: false,\n      filename: '',\n      isModelLoading: false,\n      isClassifying: false,\n      predictions: [],\n      photoSettingsOpen: true,\n      modelUpdateAvailable: false,\n      showModelUpdateAlert: false,\n      showModelUpdateSuccess: false,\n      isDownloadingModel: false\n    };\n  }\n\n  async componentDidMount() {\n    if (('indexedDB' in window)) {\n      try {\n        this.model = await tf.loadLayersModel('indexeddb://' + INDEXEDDB_KEY);\n\n        // Safe to assume tensorflowjs database and related object store exists.\n        // Get the date when the model was saved.\n        try {\n          const db = await openDB(INDEXEDDB_DB, 1, );\n          const item = await db.transaction(INDEXEDDB_STORE)\n                               .objectStore(INDEXEDDB_STORE)\n                               .get(INDEXEDDB_KEY);\n          const dateSaved = new Date(item.modelArtifactsInfo.dateSaved);\n          await this.getModelInfo();\n          console.log(this.modelLastUpdated);\n          if (!this.modelLastUpdated  || dateSaved >= new Date(this.modelLastUpdated).getTime()) {\n            console.log('Using saved model');\n          }\n          else {\n            this.setState({\n              modelUpdateAvailable: true,\n              showModelUpdateAlert: true,\n            });\n          }\n\n        }\n        catch (error) {\n          console.warn(error);\n          console.warn('Could not retrieve when model was saved.');\n        }\n\n      }\n      // If error here, assume that the object store doesn't exist and the model currently isn't\n      // saved in IndexedDB.\n      catch (error) {\n        console.log('Not found in IndexedDB. Loading and saving...');\n        console.log(error);\n        this.model = await tf.loadLayersModel(MODEL_PATH);\n        await this.model.save('indexeddb://' + INDEXEDDB_KEY);\n      }\n    }\n    // If no IndexedDB, then just download like normal.\n    else {\n      console.warn('IndexedDB not supported.');\n      this.model = await tf.loadLayersModel(MODEL_PATH);\n    }\n\n    this.setState({ modelLoaded: true });\n    this.initWebcam();\n\n    // Warm up model.\n    let prediction = tf.tidy(() => this.model.predict(tf.zeros([1, IMAGE_SIZE, IMAGE_SIZE, 3])));\n    prediction.dispose();\n  }\n\n  async componentWillUnmount() {\n    if (this.webcam) {\n      this.webcam.stop();\n    }\n\n    // Attempt to dispose of the model.\n    try {\n      this.model.dispose();\n    }\n    catch (e) {\n      // Assume model is not loaded or already disposed.\n    }\n  }\n\n  initWebcam = async () => {\n    try {\n      this.webcam = await tf.data.webcam(\n        this.refs.webcam,\n        {resizeWidth: CANVAS_SIZE, resizeHeight: CANVAS_SIZE, facingMode: 'environment'}\n      );\n    }\n    catch (e) {\n      this.refs.noWebcam.style.display = 'block';\n    }\n  }\n\n  startWebcam = async () => {\n    if (this.webcam) {\n      this.webcam.start();\n    }\n  }\n\n  stopWebcam = async () => {\n    if (this.webcam) {\n      this.webcam.stop();\n    }\n  }\n\n  getModelInfo = async () => {\n    await fetch(`${config.API_ENDPOINT}/model_info`, {\n      method: 'GET',\n    })\n    .then(async (response) => {\n      await response.json().then((data) => {\n        this.modelLastUpdated = data.last_updated;\n        console.log(`${config.API_ENDPOINT}/model_info`);\n      })\n      .catch((err) => {\n        console.log('Unable to get parse model info.');\n      });\n    })\n    .catch((err) => {\n      console.log('Unable to get model info');\n    });\n  }\n\n  updateModel = async () => {\n    // Get the latest model from the server and refresh the one saved in IndexedDB.\n    console.log('Updating the model: ' + INDEXEDDB_KEY);\n    this.setState({ isDownloadingModel: true });\n    this.model = await tf.loadLayersModel(MODEL_PATH);\n    await this.model.save('indexeddb://' + INDEXEDDB_KEY);\n    this.setState({\n      isDownloadingModel: false,\n      modelUpdateAvailable: false,\n      showModelUpdateAlert: false,\n      showModelUpdateSuccess: true\n    });\n  }\n\n  classifyLocalImage = async () => {\n    this.setState({ isClassifying: true });\n\n    const croppedCanvas = this.refs.cropper.getCroppedCanvas();\n    const image = tf.tidy( () => tf.browser.fromPixels(croppedCanvas).toFloat());\n\n    // Process and resize image before passing in to model.\n    const imageData = await this.processImage(image);\n    const resizedImage = tf.image.resizeBilinear(imageData, [IMAGE_SIZE, IMAGE_SIZE]);\n\n    const logits = this.model.predict(resizedImage);\n    const probabilities = await logits.data();\n    const preds = await this.getTopKClasses(probabilities, TOPK_PREDICTIONS);\n\n    this.setState({\n      predictions: preds,\n      isClassifying: false,\n      photoSettingsOpen: !this.state.photoSettingsOpen\n    });\n\n    // Draw thumbnail to UI.\n    const context = this.refs.canvas.getContext('2d');\n    const ratioX = CANVAS_SIZE / croppedCanvas.width;\n    const ratioY = CANVAS_SIZE / croppedCanvas.height;\n    const ratio = Math.min(ratioX, ratioY);\n    context.clearRect(0, 0, CANVAS_SIZE, CANVAS_SIZE);\n    context.drawImage(croppedCanvas, 0, 0,\n                      croppedCanvas.width * ratio, croppedCanvas.height * ratio);\n\n    // Dispose of tensors we are finished with.\n    image.dispose();\n    imageData.dispose();\n    resizedImage.dispose();\n    logits.dispose();\n  }\n\n  classifyWebcamImage = async () => {\n    this.setState({ isClassifying: true });\n\n    const imageCapture = await this.webcam.capture();\n\n    const resized = tf.image.resizeBilinear(imageCapture, [IMAGE_SIZE, IMAGE_SIZE]);\n    const imageData = await this.processImage(resized);\n    const logits = this.model.predict(imageData);\n    const probabilities = await logits.data();\n    const preds = await this.getTopKClasses(probabilities, TOPK_PREDICTIONS);\n\n    this.setState({\n      predictions: preds,\n      isClassifying: false,\n      photoSettingsOpen: !this.state.photoSettingsOpen\n    });\n\n    // Draw thumbnail to UI.\n    const tensorData = tf.tidy(() => imageCapture.toFloat().div(255));\n    await tf.browser.toPixels(tensorData, this.refs.canvas);\n\n    // Dispose of tensors we are finished with.\n    resized.dispose();\n    imageCapture.dispose();\n    imageData.dispose();\n    logits.dispose();\n    tensorData.dispose();\n  }\n\n  processImage = async (image) => {\n    return tf.tidy(() => image.expandDims(0).toFloat().div(127).sub(1));\n  }\n\n  /**\n   * Computes the probabilities of the topK classes given logits by computing\n   * softmax to get probabilities and then sorting the probabilities.\n   * param logits Tensor representing the logits from MobileNet.\n   * param topK The number of top predictions to show.\n   */\n  getTopKClasses = async (values, topK) => {\n    const valuesAndIndices = [];\n    for (let i = 0; i < values.length; i++) {\n      valuesAndIndices.push({value: values[i], index: i});\n    }\n    valuesAndIndices.sort((a, b) => {\n      return b.value - a.value;\n    });\n    const topkValues = new Float32Array(topK);\n    const topkIndices = new Int32Array(topK);\n    for (let i = 0; i < topK; i++) {\n      topkValues[i] = valuesAndIndices[i].value;\n      topkIndices[i] = valuesAndIndices[i].index;\n    }\n\n    const topClassesAndProbs = [];\n    for (let i = 0; i < topkIndices.length; i++) {\n      topClassesAndProbs.push({\n        className: MODEL_CLASSES[topkIndices[i]],\n        probability: (topkValues[i] * 100).toFixed(2)\n      });\n    }\n    return topClassesAndProbs;\n  }\n\n  handlePanelClick = event => {\n    this.setState({ photoSettingsOpen: !this.state.photoSettingsOpen });\n  }\n\n  handleFileChange = event => {\n    if (event.target.files && event.target.files.length > 0) {\n      this.setState({\n        file: URL.createObjectURL(event.target.files[0]),\n        filename: event.target.files[0].name\n      });\n    }\n  }\n\n  handleTabSelect = activeKey => {\n    switch(activeKey) {\n      case 'camera':\n        this.startWebcam();\n        break;\n      case 'localfile':\n        this.setState({filename: null, file: null});\n        this.stopWebcam();\n        break;\n      default:\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"Classify container\">\n\n      { !this.state.modelLoaded &&\n        <Fragment>\n          <Spinner animation=\"border\" role=\"status\">\n            <span className=\"sr-only\">Loading...</span>\n          </Spinner>\n          {' '}<span className=\"loading-model-text\">Loading Model</span>\n          <h6>Please wait patiently, for the first time it will take a little bit longer</h6>\n        </Fragment>\n      }\n\n      { this.state.modelLoaded &&\n        <Fragment>\n        <Button\n          onClick={this.handlePanelClick}\n          className=\"classify-panel-header\"\n          aria-controls=\"photo-selection-pane\"\n          aria-expanded={this.state.photoSettingsOpen}\n          >\n          Take or Select a Photo to Classify\n            <span className='panel-arrow'>\n            { this.state.photoSettingsOpen\n              ? <FaChevronDown />\n              : <FaChevronRight />\n            }\n            </span>\n          </Button>\n          <Collapse in={this.state.photoSettingsOpen}>\n            <div id=\"photo-selection-pane\">\n            { this.state.modelUpdateAvailable && this.state.showModelUpdateAlert &&\n                <Container>\n                  <Alert\n                    variant=\"info\"\n                    show={this.state.modelUpdateAvailable && this.state.showModelUpdateAlert}\n                    onClose={() => this.setState({ showModelUpdateAlert: false})}\n                    dismissible>\n                      An update for the <strong>{this.state.modelType}</strong> model is available.\n                      <div className=\"d-flex justify-content-center pt-1\">\n                        {!this.state.isDownloadingModel &&\n                          <Button onClick={this.updateModel}\n                                  variant=\"outline-info\">\n                            Update\n                          </Button>\n                        }\n                        {this.state.isDownloadingModel &&\n                          <div>\n                            <Spinner animation=\"border\" role=\"status\" size=\"sm\">\n                              <span className=\"sr-only\">Downloading...</span>\n                            </Spinner>\n                            {' '}<strong>Downloading...</strong>\n                          </div>\n                        }\n                      </div>\n                  </Alert>\n                </Container>\n              }\n              {this.state.showModelUpdateSuccess &&\n                <Container>\n                  <Alert variant=\"success\"\n                         onClose={() => this.setState({ showModelUpdateSuccess: false})}\n                         dismissible>\n                    The <strong>{this.state.modelType}</strong> model has been updated!\n                  </Alert>\n                </Container>\n              }\n            <Tabs defaultActiveKey=\"camera\" id=\"input-options\" onSelect={this.handleTabSelect}\n                  className=\"justify-content-center\">\n              <Tab eventKey=\"camera\" title=\"Take Photo\">\n                <div id=\"no-webcam\" ref=\"noWebcam\">\n                  <span className=\"camera-icon\"><FaCamera /></span>\n                  No camera found. <br />\n                  Please use a device with a camera, or upload an image instead.\n                </div>\n                <div className=\"webcam-box-outer\">\n                  <div className=\"webcam-box-inner\">\n                    <video ref=\"webcam\" autoPlay playsInline muted id=\"webcam\"\n                           width=\"448\" height=\"448\">\n                    </video>\n                  </div>\n                </div>\n                <div className=\"button-container\">\n                  <LoadButton\n                    variant=\"primary\"\n                    size=\"lg\"\n                    onClick={this.classifyWebcamImage}\n                    isLoading={this.state.isClassifying}\n                    text=\"Let's Classify!\"\n                    loadingText=\"Classifying...\"\n                  />\n                </div>\n              </Tab>\n              <Tab eventKey=\"localfile\" title=\"Select Image From Local\">\n                <Form.Group controlId=\"file\">\n                  <Form.Label>Upload your image</Form.Label><br />\n                  <Form.Label className=\"imagelabel\">\n                    {this.state.filename ? this.state.filename : 'Browse'}\n                  </Form.Label>\n                  <Form.Control\n                    onChange={this.handleFileChange}\n                    type=\"file\"\n                    accept=\"image/*\"\n                    className=\"imagefile\" />\n                </Form.Group>\n                { this.state.file &&\n                  <Fragment>\n                    <div id=\"local-image\">\n                      <Cropper\n                        ref=\"cropper\"\n                        src={this.state.file}\n                        style={{height: 400, width: '100%'}}\n                        guides={true}\n                        aspectRatio={1 / 1}\n                        viewMode={2}\n                      />\n                    </div>\n                    <div className=\"button-container\">\n                      <LoadButton\n                        variant=\"primary\"\n                        size=\"lg\"\n                        disabled={!this.state.filename}\n                        onClick={this.classifyLocalImage}\n                        isLoading={this.state.isClassifying}\n                        text=\"Let's Classify!\"\n                        loadingText=\"Classifying...\"\n                      />\n                    </div>\n                  </Fragment>\n                }\n              </Tab>\n            </Tabs>\n            </div>\n          </Collapse>\n          { this.state.predictions.length > 0 &&\n            <div className=\"classification-results\">\n              <h3>Predictions</h3>\n              <canvas ref=\"canvas\" width={CANVAS_SIZE} height={CANVAS_SIZE} />\n              <br />\n              <ListGroup>\n              {this.state.predictions.map((category) => {\n                console.log(category);\n                  if (category.className === 'Fresh Apple' || category.className === 'Fresh Orange' || category.className === 'Fresh Banana') {\n                    return (\n                      <div>\n                        <p>This most likely <strong>{category.className}</strong> with {category.probability}% probability!</p>\n                        <p>You can eat it safely!</p>\n                      </div>\n                    );\n                  }\n                  return (\n                      <div>\n                        <p>Oh no! This is <strong>{category.className}</strong> with {category.probability}% probability!</p>\n                        <p>You shouldn't eat it!</p>\n                      </div>\n                    );\n              })}\n              </ListGroup>\n            </div>\n          }\n          </Fragment>\n        }\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport './NotFound.css';\n\n/**\n * This is rendered when a route is not found (404).\n */\nexport default () =>\n  <div className=\"NotFound\">\n    <h1>404</h1>\n    <h3>The page you were looking for is not here.</h3>\n    <a href=\"/\">Go Home</a>\n  </div>;\n","import React from 'react';\nimport { Route, HashRouter, Switch } from 'react-router-dom';\nimport About from './pages/About';\nimport Classify from './pages/Classify';\nimport NotFound from './pages/NotFound';\n\nconst Routes = ({ childProps }) => (\n  <HashRouter>\n    <Switch>\n      <Route path=\"/\" exact component={Classify} props={childProps} />\n      <Route path=\"/about\" exact component={About} props={childProps} />\n      <Route component={NotFound} />\n    </Switch>\n  </HashRouter>\n);\n\nexport default Routes;\n","import { PropTypes } from 'prop-types';\nimport React, { Component } from 'react';\nimport { Link, withRouter } from 'react-router-dom';\nimport { Container, Nav, Navbar } from 'react-bootstrap';\nimport AlertDismissable from './components/AlertDismissable';\nimport Routes from './Routes';\nimport './App.css';\n\n\nclass App extends Component {\n\n  constructor(props) {\n    super(props);\n    const reloadMsg = `\n      New content is available.<br />\n      Please <a href='javascript:location.reload();'>reload</a>.<br />\n      <small>If reloading doesn't work, close all tabs/windows of this web application,\n      and then reopen the application.</small>\n    `;\n    this.state = {\n      showUpdateAlert: true,\n      reloadMsg: reloadMsg\n    };\n  }\n\n  dismissUpdateAlert = event => {\n    this.setState({ showUpdateAlert: false });\n  }\n\n  render() {\n    return (\n        <div className=\"App\">\n          <Container>\n            <Navbar collapseOnSelect className=\"app-nav-bar\" variant=\"dark\" expand=\"lg\">\n              <Navbar.Brand href=\"/\">What's Fresh & What's Rotten?</Navbar.Brand>\n              <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\n              <Navbar.Collapse id=\"basic-navbar-nav\">\n                <Nav>\n                  <Link className=\"nav-link\" to=\"/\">Let's Classify!</Link>\n                  <Link className=\"nav-link\" to=\"/about\">About</Link>\n                </Nav>\n              </Navbar.Collapse>\n            </Navbar>\n            { this.props.updateAvailable && this.state.showUpdateAlert &&\n              <div style={{paddingTop: '10px'}}>\n                <AlertDismissable\n                  title=\"\"\n                  variant=\"info\"\n                  message={this.state.reloadMsg}\n                  show={this.props.updateAvailable && this.state.showUpdateAlert}\n                  onClose={this.dismissUpdateAlert} />\n              </div>\n            }\n          </Container>\n          <Container>\n            <Routes />\n          </Container>\n        </div>\n    );\n  }\n}\n\nApp.propTypes = {\n  updateAvailable: PropTypes.bool.isRequired,\n};\n\nexport default withRouter(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      // A new service worker has previously finished installing, and is now waiting.\n      if (registration.waiting && registration.active) {\n        newerSwAvailable(registration.waiting);\n      }\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              newerSwAvailable(installingWorker);\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n      function newerSwAvailable(sw){\n        // At this point, the updated precached content has been fetched,\n        // but the previous service worker will still serve the older\n        // content until all client tabs are closed.\n        console.log(\n          'New content is available and will be used when all ' +\n            'tabs for this page are closed. See http://bit.ly/CRA2-PWA.'\n        );\n        if (config && config.onUpdate) {\n          config.onUpdate(registration, sw);\n        }\n      }\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\n\nclass Index extends Component {\n  state = {\n    contentCached: false,\n    updateAvailable: false,\n  };\n\n  componentDidMount() {\n    const config = {\n      onUpdate: this.handleUpdate,\n    };\n\n    // If you want your app to work offline and load faster, you can change\n    // unregister() to register() below. Note this comes with some pitfalls.\n    // Learn more about service workers: https://bit.ly/CRA-PWA\n    serviceWorker.register(config);\n  }\n\n  render() {\n    return (\n      <Router>\n        <App updateAvailable={this.state.updateAvailable} />\n      </Router>\n    );\n  }\n\n  handleUpdate = (registration) => {\n    const waitingServiceWorker = registration.waiting;\n\n    if (waitingServiceWorker) {\n      waitingServiceWorker.postMessage({ type: 'SKIP_WAITING' });\n    }\n    this.setState({ updateAvailable: true});\n  }\n}\n\nReactDOM.render(<Index />, document.getElementById('root'));\n"],"sourceRoot":""}